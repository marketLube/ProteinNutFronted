<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="./src/fonts.css" />
    <link rel="stylesheet" href="./css/index.css" />
    <link rel="stylesheet" href="./css/utility.css" />
    <title>Protein Nut</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
    <script>
      function smoothScroll() {
        let scrollAmount = 0;
        let isScrolling = false;
        let lastTouchY = 0;

        function smoothScroll(delta) {
          scrollAmount += delta;

          if (!isScrolling) {
            isScrolling = true;
            requestAnimationFrame(smoothStep);
          }
        }

        function smoothStep() {
          if (Math.abs(scrollAmount) > 1) {
            window.scrollBy(0, scrollAmount * 0.2);
            scrollAmount *= 0.9;
            requestAnimationFrame(smoothStep);
          } else {
            scrollAmount = 0;
            isScrolling = false;
          }
        }

        window.addEventListener(
          "wheel",
          (event) => {
            event.preventDefault();
            smoothScroll(event.deltaY);
          },
          { passive: false }
        );

        window.addEventListener("touchstart", (event) => {
          lastTouchY = event.touches[0].clientY;
        });

        window.addEventListener("touchmove", (event) => {
          const currentTouchY = event.touches[0].clientY;
          const deltaY = lastTouchY - currentTouchY;
          smoothScroll(deltaY);
          lastTouchY = currentTouchY;
        });

        window.addEventListener("touchend", () => {
          lastTouchY = 0;
        });
      }

      window.innerWidth >= 768 && smoothScroll();
    </script>
  </body>
</html>
